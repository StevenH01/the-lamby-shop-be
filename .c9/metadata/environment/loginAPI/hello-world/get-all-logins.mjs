{"filter":false,"title":"get-all-logins.mjs","tooltip":"/loginAPI/hello-world/get-all-logins.mjs","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":10,"column":19},"end":{"row":10,"column":26},"action":"remove","lines":["product"],"id":2},{"start":{"row":10,"column":19},"end":{"row":10,"column":20},"action":"insert","lines":["l"]},{"start":{"row":10,"column":20},"end":{"row":10,"column":21},"action":"insert","lines":["o"]},{"start":{"row":10,"column":21},"end":{"row":10,"column":22},"action":"insert","lines":["g"]},{"start":{"row":10,"column":22},"end":{"row":10,"column":23},"action":"insert","lines":["i"]},{"start":{"row":10,"column":23},"end":{"row":10,"column":24},"action":"insert","lines":["n"]}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":41},"action":"remove","lines":["const bucketName = 'thelambyshop-images';"],"id":3},{"start":{"row":11,"column":57},"end":{"row":12,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":11,"column":0},"end":{"row":11,"column":57},"action":"remove","lines":["const s3Client = new S3Client({ region: 'us-west-2' });  "],"id":4},{"start":{"row":10,"column":31},"end":{"row":11,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":4,"column":0},"end":{"row":5,"column":61},"action":"remove","lines":["import { S3Client, GetObjectCommand } from '@aws-sdk/client-s3';","import { getSignedUrl } from '@aws-sdk/s3-request-presigner';"],"id":5},{"start":{"row":3,"column":76},"end":{"row":4,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":13,"column":0},"end":{"row":28,"column":2},"action":"remove","lines":["// A function to generate a signed url for the s3 images","const generateSignedUrl = async (s3Key) => {","    const command = new GetObjectCommand({","        Bucket: bucketName,","        Key: s3Key,","    });","","    try {","        // Generate a signed URL with expiration time (1 hour in this example)","        const signedUrl = await getSignedUrl(s3Client, command, { expiresIn: 3600 });","        return signedUrl;","    } catch (err) {","        console.log(\"Error generating signed URL\", err);","        return null;  // Return null if there's an error generating the signed URL","    }","};"],"id":6},{"start":{"row":12,"column":1},"end":{"row":13,"column":0},"action":"remove","lines":["",""]},{"start":{"row":12,"column":0},"end":{"row":12,"column":1},"action":"remove","lines":[" "]},{"start":{"row":11,"column":3},"end":{"row":12,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":28,"column":0},"end":{"row":37,"column":9},"action":"remove","lines":["        // Retrieve images","        console.log(\"Getting signedUrls\");","        for (let item of items) {","            if (item.imageKey) {  ","                const signedUrl = await generateSignedUrl(item.imageKey);","                // console.log(\"signedUrl=\", signedUrl);","                item.signedUrl = signedUrl;  // Attach the signed URL to the item","            }","            // console.log(\"imageKey=\",item.imageKey);","        }"],"id":7},{"start":{"row":27,"column":8},"end":{"row":28,"column":0},"action":"remove","lines":["",""]},{"start":{"row":27,"column":4},"end":{"row":27,"column":8},"action":"remove","lines":["    "]},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "]},{"start":{"row":26,"column":31},"end":{"row":27,"column":0},"action":"remove","lines":["",""]}]]},"ace":{"folds":[],"scrolltop":283.20000000000005,"scrollleft":0,"selection":{"start":{"row":26,"column":31},"end":{"row":26,"column":31},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1727302051295,"hash":"ca972765077756fa51bae3fd67e8c2d328d19d36"}